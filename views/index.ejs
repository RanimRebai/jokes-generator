<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jokes Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    
</head>
<body>
    <div class="container-sm my-4">
        <div>
        <% if(!locals.single){%>
            <h1>Jokes Generator</h1>
            <h2>Press the button below</h2>
        <%}else{%>
            
            <div style="text-align: center;">
            <img src="/photos/aaaah-cat.webp" alt="cat gif laughing">
            </div>
            <h3><%=single%></h3>
            <% if(locals.delivery){%>
                <h3><%=delivery%></h3>
            <%}};%>
        </div>
        <form action="/joke" method="post">
            <div class="buttons-container">
            <input type="radio" value="Miscellaneous" id="Miscellaneous" class="btn-check" autocomplete="off" name="category">
            <label for="Miscellaneous" class="btn btn-secondary b1">Miscellaneous</label>
            <input type="radio" value="Coding" id="Coding" class="btn-check" autocomplete="off" name="category">
            <label for="Coding" class="btn btn-secondary b2">Coding</label>
            <input type="radio" value="Development" id="Development" class="btn-check" autocomplete="off" name="category">
            <label for="Development" class="btn btn-secondary b3">Development</label>
            <input type="radio" value="Halloween" id="Halloween" class="btn-check" autocomplete="off" name="category">
            <label for="Halloween" class="btn btn-secondary b4">Halloween</label>
            </div>
            <div style="text-align: center;">
            <button class="btn btnn" type="submit"><%=button%></button>
            </div>
        </form>
    </div>
    <div style="display: none;">
        <audio id="joke-audio" src="/catlaugh.mp3"></audio>
    </div>

<script>
  // Play audio only if a joke exists
  const hasJoke = <%= JSON.stringify(!!locals.single) %> ; // `true` if joke is present

  if (hasJoke) {
    const audio = document.getElementById('joke-audio');
    audio.play().catch(err => {
      console.warn("Audio couldn't autoplay:", err);
    });
  }
</script>

</body>
</html>